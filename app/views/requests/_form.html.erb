<%= form_with(model: request, local: true) do |f| %>
  <div class="mb-4">
    <%= f.label :title, "Назва", class: "block font-medium" %>
    <%= f.text_field :title, class: "w-full mt-1 p-2 border rounded" %>
  </div>

  <div class="mb-4">
    <%= f.label :description, "Опис", class: "block font-medium" %>
    <%= f.text_area :description, class: "w-full mt-1 p-2 border rounded" %>
  </div>

  <div class="mb-4">
    <%= f.label :category, "Категорія", class: "block font-medium" %>
    <%= f.select :category, Request::CATEGORIES, {}, class: "w-full mt-1 p-2 border rounded" %>
  </div>

  <div class="mb-4">
    <%= f.label :location, "Місцезнаходження", class: "block font-medium" %>
    <% if current_user.profile.blank? || (current_user.profile.city.blank? && current_user.profile.country.blank?) %>
      <div class="p-3 bg-yellow-50 text-yellow-800 rounded border border-yellow-200 mb-2">
        Будь ласка, <%= link_to "заповніть місцезнаходження", edit_profile_path %> у вашому профілі.
      </div>
      <%= f.text_field :location, class: "w-full mt-1 p-2 border rounded", required: true %>
    <% else %>
      <div class="w-full mt-1 p-2 border rounded bg-gray-50">
        <%= @request.location.presence || "Буде взято з вашого профілю" %>
      </div>
    <% end %>
  </div>

  <% if f.object.persisted? && !request.completed? %>
    <div class="mb-4">
      <%= f.label :status, "Статус", class: "block font-medium" %>
      <%= f.select :status, Request::STATUSES, { selected: request.status }, class: "w-full mt-1 p-2 border rounded" %>
    </div>
  <% end %>

  <%= f.submit "Зберегти", class: "bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700" %>
<% end %>