<h1 class="text-2xl font-bold mb-2"><%= @request.title %></h1>
<p><%= @request.description %></p>
<p><strong>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è:</strong> <%= @request.category %></p>
<p><strong>–ú—ñ—Å—Ü–µ–∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è:</strong> <%= @request.location %></p>

<%# Show "Complete Request" button only if user is a volunteer or the author, and the request is not completed %>
<% if (current_user.role == "–≤–æ–ª–æ–Ω—Ç–µ—Ä" || current_user == @request.user) && @request.status != "–∑–∞–≤–µ—Ä—à–µ–Ω–æ" %>
  <%= button_to "‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç–∏ –∑–∞–ø–∏—Ç",
                complete_request_path(@request),
                method: :patch,
                class: "mt-4 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700" %>
<% end %>

<%# Show "Edit Request" button only for the request author %>
<% if current_user == @request.user %>
  <%= link_to "‚úèÔ∏è –ó–º—ñ–Ω–∏—Ç–∏ –∑–∞–ø–∏—Ç", edit_request_path(@request),
              class: "inline-block mt-4 bg-gray-100 border border-gray-400 text-gray-800 px-4 py-2 rounded hover:bg-gray-200" %>
<% end %>

<p class="mt-2">
  <strong>–°—Ç–∞—Ç—É—Å:</strong>
  <span class="inline-block px-3 py-1 rounded-full text-sm font-semibold
    <%= case @request.status
        when '–æ—á—ñ–∫—É—î –≤–æ–ª–æ–Ω—Ç–µ—Ä–∞' then 'bg-yellow-100 text-yellow-800'
        when '–≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è' then 'bg-blue-100 text-blue-800'
        when '–∑–∞–≤–µ—Ä—à–µ–Ω–æ' then 'bg-green-100 text-green-800'
        else 'bg-gray-200 text-gray-800'
        end %>">
    <%= @request.status.capitalize %>
  </span>
</p>

<%#Chat button ‚Äî visible to request author and the volunteer who responded %>
<% if current_user == @request.user || @request.responses.exists?(user_id: current_user.id) %>
  <%= link_to "üí¨ –ü–µ—Ä–µ–π—Ç–∏ –¥–æ —á–∞—Ç—É", request_messages_path(@request),
              class: "inline-block mt-4 bg-white border border-blue-500 text-blue-600 px-4 py-2 rounded hover:bg-blue-50 transition" %>
<% end %>

<%# Response button ‚Äî only for volunteers who haven't responded yet %>
<% if user_signed_in? && current_user != @request.user && !@request.responses.exists?(user_id: current_user.id) %>
  <%= button_to '–í—ñ–¥–≥—É–∫–Ω—É—Ç–∏—Å—è', request_responses_path(@request), method: :post,
                class: 'bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 mt-4' %>
<% end %>

<%= link_to '–ù–∞–∑–∞–¥', requests_path, class: 'text-blue-600 underline mt-4 inline-block' %>
